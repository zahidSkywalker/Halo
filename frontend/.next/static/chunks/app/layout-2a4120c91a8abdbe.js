(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8832:function(e,t,r){Promise.resolve().then(r.t.bind(r,9974,23)),Promise.resolve().then(r.bind(r,9064)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,1093))},1093:function(e,t,r){"use strict";r.d(t,{Providers:function(){return S}});var o=r(7437),n=r(6484),s=r(8298),a=r(2265);let i=(0,a.createContext)(void 0),c=e=>{let{children:t}=e,[r,n]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{n(JSON.parse(e))}catch(e){console.error("Error parsing user data:",e)}c(!1)},[]);let l=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(r.ok){let e=await r.json();n(e.data.user),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken)}else throw Error("Login failed")}catch(e){throw console.error("Login error:",e),e}},u=async e=>{try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();n(e.data.user),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken)}else throw Error("Registration failed")}catch(e){throw console.error("Registration error:",e),e}};return(0,o.jsx)(i.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:s,login:l,logout:()=>{n(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},register:u},children:t})};var l=r(8680);let u=(0,a.createContext)(void 0),d=e=>{let{children:t}=e,[r,n]=a.useState(null),[s,i]=a.useState(!1);return(0,a.useEffect)(()=>{let e=(0,l.io)("ws://localhost:3001",{transports:["websocket"],autoConnect:!1});return e.on("connect",()=>{console.log("Socket connected"),i(!0)}),e.on("disconnect",()=>{console.log("Socket disconnected"),i(!1)}),e.on("connect_error",e=>{console.error("Socket connection error:",e),i(!1)}),n(e),()=>{e.disconnect()}},[]),(0,o.jsx)(u.Provider,{value:{socket:r,isConnected:s},children:t})},h=(0,a.createContext)(void 0),f=e=>{let{children:t}=e,[r,n]=(0,a.useState)([]),s=e=>{n(t=>t.filter(t=>t.id!==e))};return(0,o.jsx)(h.Provider,{value:{notifications:r,addNotification:e=>{let t=Math.random().toString(36).substr(2,9),r={...e,id:t};n(e=>[...e,r]),void 0!==e.duration&&setTimeout(()=>{s(t)},e.duration)},removeNotification:s,clearNotifications:()=>{n([])}},children:t})},g=new n.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e5}}});function S(e){let{children:t}=e;return(0,o.jsx)(n.QueryClientProvider,{client:g,children:(0,o.jsx)(s.f,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,o.jsx)(c,{children:(0,o.jsx)(d,{children:(0,o.jsx)(f,{children:t})})})})})}},2778:function(){}},function(e){e.O(0,[635,847,971,117,744],function(){return e(e.s=8832)}),_N_E=e.O()}]);